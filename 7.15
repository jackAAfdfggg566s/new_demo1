è¦é€šè¿‡ AWS CLI è·å– RDS åªè¯»å®ä¾‹ï¼ˆreader instanceï¼‰çš„ endpointï¼Œå–å†³äºä½ æ˜¯ï¼š

ä½¿ç”¨äº† Amazon Auroraï¼ˆå³ Aurora Clusterï¼‰ï¼šå®ƒæœ‰ writer endpoint å’Œ reader endpoint

è¿˜æ˜¯å•ä¸ª RDS å®ä¾‹ç»„æˆçš„åªè¯»å‰¯æœ¬ï¼ˆRead Replicaï¼‰



---

âœ… æƒ…å†µä¸€ï¼šAurora é›†ç¾¤ï¼ˆæ¨èæ–¹å¼ï¼‰

Aurora æœ‰ä¸“é—¨çš„ reader endpointï¼Œå¯ä»¥ç›´æ¥è¿™æ ·æŸ¥ï¼š

aws rds describe-db-clusters \
  --query 'DBClusters[?DBClusterIdentifier==`<your-cluster-name>`].ReaderEndpoint' \
  --output text

ä¾‹å¦‚ï¼š

aws rds describe-db-clusters \
  --query 'DBClusters[?DBClusterIdentifier==`mydb-cluster`].ReaderEndpoint' \
  --output text

> ğŸ” ReaderEndpoint æ˜¯è´Ÿè½½å‡è¡¡çš„ read-only å…¥å£ã€‚




---

âœ… æƒ…å†µäºŒï¼šæ™®é€š RDS å®ä¾‹ + Read Replica

ä½ å¯ä»¥åˆ—å‡ºæ‰€æœ‰å®ä¾‹ï¼Œå¹¶è¿‡æ»¤å‡º Read Replica ç±»å‹çš„ï¼š

aws rds describe-db-instances \
  --query 'DBInstances[?ReadReplicaSourceDBInstanceIdentifier!=null].[DBInstanceIdentifier,Endpoint.Address]' \
  --output table

æˆ–è·å–æŸä¸ªå®ä¾‹çš„ endpointï¼š

aws rds describe-db-instances \
  --db-instance-identifier my-replica-instance-id \
  --query 'DBInstances[0].Endpoint.Address' \
  --output text


---

ğŸ” å¦‚ä½•åˆ¤æ–­æ˜¯ Aurora è¿˜æ˜¯æ™®é€š RDSï¼Ÿ

ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥æŸä¸ªå®ä¾‹ï¼š

aws rds describe-db-instances --db-instance-identifier your-instance-id \
  --query 'DBInstances[0].Engine' --output text

å¦‚æœè¿”å›çš„æ˜¯ï¼š

aurora-mysql æˆ– aurora-postgresql â†’ å°±æ˜¯ Auroraï¼ˆç”¨ describe-db-clustersï¼‰

å…¶ä»–ï¼ˆå¦‚ mysqlã€postgresã€oracleï¼‰ â†’ æ™®é€š RDSï¼ˆç”¨ describe-db-instancesï¼‰



---

ğŸ§ª å¿«é€Ÿè„šæœ¬ï¼šè·å– Aurora reader endpoint

CLUSTER_NAME=mydb-cluster
READER_EP=$(aws rds describe-db-clusters \
  --query "DBClusters[?DBClusterIdentifier=='$CLUSTER_NAME'].ReaderEndpoint" \
  --output text)
echo "Aurora Reader Endpoint: $READER_EP"


---

å¦‚æœä½ è´´å‡ºä½ æœ‰çš„å®ä¾‹ ID æˆ–æ¶æ„ï¼ˆæ˜¯ Aurora è¿˜æ˜¯æ™®é€š RDS + replicaï¼‰ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™å…·ä½“å‘½ä»¤ã€‚æ˜¯å¦è¦ï¼Ÿ

