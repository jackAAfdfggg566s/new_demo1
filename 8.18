å¥½çš„ ğŸ‘ æˆ‘ç»™ä½ å†™ä¸€ä¸ªå®Œæ•´çš„ FIS å®éªŒæ¨¡æ¿ JSONï¼ŒTarget ç”¨ Subnetï¼ˆå› ä¸ºä½ è¯´ Console é‡Œåªçœ‹åˆ° Subnet å¯ä»¥é€‰ï¼‰ã€‚è¿™æ ·å®éªŒä¸€è·‘ï¼Œå°±ä¼šæŠŠè¿™ä¸ª Subnet ä¸Šçš„æ‰€æœ‰ ENIï¼ˆåŒ…æ‹¬ RDS Primary çš„ï¼‰æ–­æ‰ï¼Œä»è€Œè§¦å‘ failoverã€‚

å‡è®¾å‚æ•°ï¼š

åŒºåŸŸï¼šap-southeast-2

è´¦æˆ· IDï¼š123456789012

è¦æ–­çš„ Subnetï¼šsubnet-0abc123def456ghij

æŒç»­æ—¶é—´ï¼š5 åˆ†é’Ÿ



---

å®éªŒæ¨¡æ¿ JSON

{
  "description": "RDS failover test by disconnecting subnet",
  "targets": {
    "rds-subnet": {
      "resourceType": "aws:ec2:subnet",
      "resourceArns": [
        "arn:aws:ec2:ap-southeast-2:123456789012:subnet/subnet-0abc123def456ghij"
      ]
    }
  },
  "actions": {
    "network-disrupt": {
      "actionId": "aws:ec2:network-disrupt-connectivity",
      "parameters": {
        "scope": "ALL",
        "duration": "PT5M"
      },
      "targets": {
        "Subnets": "rds-subnet"
      }
    }
  },
  "stopConditions": [],
  "roleArn": "arn:aws:iam::123456789012:role/FIS-Experiment-Role",
  "tags": {
    "Name": "rds-failover-test"
  }
}


---

å­—æ®µè§£é‡Š

targets.rds-subnet.resourceType=aws:ec2:subnet â†’ ç›®æ ‡æ˜¯æ•´ä¸ªå­ç½‘ã€‚

actionId=aws:ec2:network-disrupt-connectivity â†’ ç½‘ç»œä¸­æ–­ã€‚

scope=ALL â†’ å…¥ç«™å’Œå‡ºç«™å…¨æ–­ã€‚

duration=PT5M â†’ æ•…éšœæŒç»­ 5 åˆ†é’Ÿï¼ˆISO8601 æ ¼å¼ï¼‰ã€‚

roleArn â†’ è¦æœ‰ FIS çš„æ‰§è¡Œæƒé™ï¼ˆè‡³å°‘ fis:StartExperimentã€ec2:CreateNetworkInsightsPathã€ec2:ModifyNetworkInterfaceAttribute ç­‰ï¼‰ã€‚



---

âš ï¸ æé†’ï¼š

ä¸€æ—¦è¿è¡Œï¼Œè¿™ä¸ª Subnet ä¸Šæ‰€æœ‰å®ä¾‹éƒ½ä¼šæ–­ç½‘ï¼Œä¸å…‰æ˜¯ RDSã€‚

æƒ³æœ€å°åŒ–å½±å“ï¼Œå»ºè®®è¿˜æ˜¯ç”¨ ENI çº§åˆ« targetï¼ˆåªèƒ½èµ° JSON/CLIï¼Œä¸åœ¨ Console ä¸‹æ‹‰æ¡†é‡Œï¼‰ã€‚



---

è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª ENI ç²¾ç¡® targeting ç‰ˆæœ¬çš„ JSONï¼ˆåªæ–­ RDS Primary çš„ ENIï¼Œä¸å½±å“åˆ«çš„ EC2/æœåŠ¡ï¼‰ï¼Ÿ

