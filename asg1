å¯¹çš„ ğŸ‘
ä½ ä¸Šé¢è¯´çš„é‚£äº›æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ç”¨æ¥æ¨¡æ‹Ÿ AZ failover çš„ï¼Œä¸æ˜¯â€œçœŸçš„ EC2 å®¹é‡ä¸è¶³â€ï¼Œè€Œæ˜¯ç­‰ä»·æ•ˆæœçš„ AZ çº§å¤±è´¥ã€‚
æˆ‘å¸®ä½ æŠŠé€»è¾‘å¯¹é½åˆ° AZ failover è§†è§’ï¼Œè¿™æ ·ä½ åœ¨è®¾è®¡/å†™å®éªŒè¯´æ˜æ—¶ç”¨è¯ä¹Ÿä¼šéå¸¸å‡†ç¡®ã€‚
ä¸€ã€ç»“è®ºå…ˆè¡Œï¼ˆç»™è¯„å®¡/æ–‡æ¡£ç”¨ï¼‰
AWS FIS is used to simulate Availability Zoneâ€“level capacity loss, not actual EC2 capacity exhaustion.
ä½ åšçš„æ˜¯ï¼š
âŒ ä¸æ˜¯æµ‹è¯• AWS èƒ½ä¸èƒ½ç»™ä½ å®¹é‡
âœ… æ˜¯æµ‹è¯• å½“æŸä¸ª AZ æ— æ³•å†æä¾›è®¡ç®—å®¹é‡æ—¶ï¼Œä½ çš„ç³»ç»Ÿæ˜¯å¦èƒ½è‡ªåŠ¨ fail over
äºŒã€ä¸ºä»€ä¹ˆè¿™ç­‰ä»·äº AZ failoverï¼Ÿ
åœ¨çœŸå®äº‹æ•…é‡Œï¼ŒAZ failover é€šå¸¸è¡¨ç°ä¸ºï¼š
è¯¥ AZï¼š
æ— æ³• launch æ–°å®ä¾‹
Spot / On-Demand éƒ½å¤±è´¥
ASG / EKS çœ‹åˆ°çš„ç°è±¡å°±æ˜¯ï¼š
å¤åˆ¶ä»£ç 

InsufficientInstanceCapacity
ğŸ‘‰ æ‰€ä»¥ â€œå®¹é‡ä¸è¶³â€åªæ˜¯ AZ ä¸å¯ç”¨çš„ä¸€ç§è¡¨è±¡
ä¸‰ã€FIS æ¨¡æ‹Ÿ AZ failover çš„æ­£ç¡®æ–¹å¼ï¼ˆä½ ç”¨çš„æ˜¯å¯¹çš„ï¼‰
âœ… æ ‡å‡†æ¨¡å¼ï¼šKill + Scale
å®éªŒåŠ¨ä½œ
aws:ec2:terminate-instances
scopeï¼šå•ä¸€ AZ
åŒæ—¶è§¦å‘
ASG scale out
æˆ– EKS HPA
ç³»ç»Ÿæ„ŸçŸ¥
ç»„ä»¶
çœ‹åˆ°çš„æƒ…å†µ
ASG
æœ¬ AZ èµ·ä¸æ¥å®ä¾‹
Scheduler
Pending
åº”ç”¨
å®¹é‡ä¸‹é™
æ§åˆ¶é¢
å¤šæ¬¡ launch å¤±è´¥
ğŸ‘‰ è¿™åœ¨æ•ˆæœä¸Šå°±æ˜¯ï¼šAZ ä¸å¯ç”¨
å››ã€AZ failover ä¸‹ä½ åº”è¯¥éªŒè¯çš„ç‚¹ï¼ˆå…³é”®ï¼‰
1ï¸âƒ£ ASG / NodeGroup è¡Œä¸º
æ˜¯å¦ï¼š
è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»– AZ
è‡ªåŠ¨ balance capacity
æ˜¯å¦å¡åœ¨ï¼š
å• AZ
å• Subnet
2ï¸âƒ£ Instance ç­–ç•¥ï¼ˆéå¸¸é‡è¦ï¼‰
é…ç½®
AZ failover æ—¶è¡¨ç°
å• InstanceType
ææ˜“å¤±è´¥
MixedInstancesPolicy
æˆåŠŸç‡é«˜
Capacity-optimized
æ›´çœŸå®
3ï¸âƒ£ EKS ç‰¹æœ‰æ£€æŸ¥
Node æ˜¯å¦åœ¨å…¶ä»– AZ è¢«æ‹‰èµ·
Pod æ˜¯å¦ä» Pending â†’ Running
PDB æ˜¯å¦é˜»æ­¢çº§è”å¤±è´¥
äº”ã€ä½ ç°åœ¨çš„å®éªŒå¯ä»¥è¿™æ ·â€œæ­£åâ€
å¦‚æœä½ è¦å†™æ–‡æ¡£ / RFC / PR è¯´æ˜ï¼Œæˆ‘ç»™ä½ ä¸€æ®µéå¸¸æ ‡å‡†çš„æè¿°ï¼Œå¯ä»¥ç›´æ¥ç”¨ï¼š
This FIS experiment simulates an Availability Zone failure by terminating instances in a single AZ and forcing a scale-out event.
The goal is to validate automatic capacity failover to other AZs and verify system resilience when new capacity cannot be provisioned in the affected AZ.
å…­ã€å¸¸è§è¯¯åŒºï¼ˆé¿å…è¢« reviewer challengeï¼‰
âŒ é”™è¯¯è¯´æ³•ï¼š
â€œSimulate EC2 insufficient capacityâ€
âœ… æ­£ç¡®è¯´æ³•ï¼š
â€œSimulate AZ-level capacity lossâ€
â€œSimulate inability to provision capacity in one AZâ€
ä¸ƒã€å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ 
æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š
ç»™ä½ ä¸€ä»½ FIS AZ Failover å®éªŒæ¨¡æ¿
æˆ–å¯¹ä½ ç°æœ‰æ–¹æ¡ˆåš reviewï¼ˆå“ªé‡Œåƒ AZ failoverï¼Œå“ªé‡Œä¸åƒï¼‰
æˆ–å¸®ä½ å†™ Expected Outcome / Rollback Criteria
ä½ ç°åœ¨è¿™æ¡è·¯æ˜¯å®Œå…¨å¯¹çš„ï¼Œè€Œä¸”æ˜¯ AWS å®˜æ–¹è®¤å¯çš„æ‰“æ³•ã€‚