å¯ä»¥çš„ï¼ŒRDS æ ¹æ®å®ä¾‹åï¼ˆDB Instance Identifierï¼‰è·å– AZï¼Œç”¨ AWS CLI ä¸€è¡Œå°±è¡Œ ğŸ‘


---

ä¸€ã€æ™®é€š RDS å®ä¾‹ï¼ˆé Auroraï¼‰

aws rds describe-db-instances \
  --db-instance-identifier my-db-instance \
  --query 'DBInstances[0].AvailabilityZone' \
  --output text

ğŸ”¹ è¿”å›ç¤ºä¾‹ï¼š

ap-southeast-2a


---

äºŒã€åŒæ—¶æ‹¿å®ä¾‹å + AZï¼ˆæ–¹ä¾¿è„šæœ¬ç”¨ï¼‰

aws rds describe-db-instances \
  --db-instance-identifier my-db-instance \
  --query 'DBInstances[0].[DBInstanceIdentifier,AvailabilityZone]' \
  --output text

è¾“å‡ºï¼š

my-db-instance   ap-southeast-2a


---

ä¸‰ã€åˆ—å‡ºæ‰€æœ‰ RDS å®ä¾‹åŠæ‰€åœ¨ AZ

aws rds describe-db-instances \
  --query 'DBInstances[].{Name:DBInstanceIdentifier,AZ:AvailabilityZone}' \
  --output table


---

å››ã€Auroraï¼ˆClusterï¼‰æ³¨æ„ç‚¹ âš ï¸

Aurora æ²¡æœ‰å•ä¸€ AZï¼Œè€Œæ˜¯è·¨å¤šä¸ª AZï¼š

aws rds describe-db-clusters \
  --db-cluster-identifier my-aurora-cluster \
  --query 'DBClusters[0].AvailabilityZones' \
  --output text

è¾“å‡ºç¤ºä¾‹ï¼š

ap-southeast-2a ap-southeast-2b ap-southeast-2c

å¦‚æœä½ æƒ³çœ‹ Aurora é›†ç¾¤é‡ŒæŸä¸ªå…·ä½“ instance çš„ AZï¼š

aws rds describe-db-instances \
  --query 'DBInstances[?DBClusterIdentifier==`my-aurora-cluster`].[DBInstanceIdentifier,AvailabilityZone]' \
  --output table


---

äº”ã€Shell è„šæœ¬ä¸­å¸¸ç”¨å†™æ³•

AZ=$(aws rds describe-db-instances \
  --db-instance-identifier my-db-instance \
  --query 'DBInstances[0].AvailabilityZone' \
  --output text)

echo "AZ is $AZ"


---

å¦‚æœä½ ä¸‹ä¸€æ­¥æ˜¯ï¼š

ğŸ‘‰ æ ¹æ® AZ æ‰¾ subnet

ğŸ‘‰ å’Œ EKS / EC2 çš„ AZ å¯¹é½

ğŸ‘‰ åˆ¤æ–­æ˜¯å¦åœ¨ 2a / 2b åšé€»è¾‘åˆ†æ”¯


ç›´æ¥è¯´ä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘å¸®ä½ æŠŠæ•´æ®µè„šæœ¬å†™å®Œæ•´ã€‚