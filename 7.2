ä½ è¯´çš„â€œé€‰æ‹©æŸä¸ª pipelineâ€å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„è¯¯è§£â€”â€”GitLab çš„å®šæ—¶ä»»åŠ¡ä¸æ˜¯é€‰æ‹©å…·ä½“æŸä¸€ä¸ª pipelineï¼Œè€Œæ˜¯å®šæ—¶è§¦å‘æŸä¸ªåˆ†æ”¯ä¸Šçš„ .gitlab-ci.yml æ–‡ä»¶æ‰€å®šä¹‰çš„ pipelineã€‚

æ¢å¥è¯è¯´ï¼š

> ä½ ä¸èƒ½é€‰æ‹©æŸä¸ª pipelineï¼Œè€Œæ˜¯å®šæ—¶è§¦å‘æŸä¸ªåˆ†æ”¯çš„ pipelineï¼Œè¿è¡Œå®ƒå¯¹åº”çš„ .gitlab-ci.yml ä¸­å®šä¹‰çš„ jobsã€‚




---

âœ… ä½ å¯ä»¥é€šè¿‡â€œå˜é‡ + rulesâ€æ¥æ§åˆ¶ä¸åŒçš„ pipeline é€»è¾‘

å¦‚æœä½ å¸Œæœ›â€œå®šæ—¶è¿è¡Œä¸åŒçš„ pipelineâ€ï¼Œå¯ä»¥é€šè¿‡åœ¨å®šæ—¶ä»»åŠ¡é‡Œè®¾ç½®å˜é‡ï¼Œæ¥æ§åˆ¶ .gitlab-ci.yml ä¸­åˆ°åº•è¿è¡Œå“ªä¸€å¥—é€»è¾‘ï¼ˆå“ªä¸€ä¸ª pipeline ç»„åˆï¼‰ã€‚


---

ğŸ§© ä¾‹å­ï¼šå®šæ—¶ä»»åŠ¡æ§åˆ¶ä¸åŒ pipeline åˆ†æ”¯é€»è¾‘

å‡è®¾ä½ è¦åœ¨ä¸åŒæ—¶é—´è¿è¡Œä¸¤ä¸ªä¸åŒ pipelineï¼š

stages:
  - build
  - test

pipeline_a:
  stage: build
  script: echo "Running Pipeline A"
  rules:
    - if: '$RUN_TYPE == "A"'

pipeline_b:
  stage: test
  script: echo "Running Pipeline B"
  rules:
    - if: '$RUN_TYPE == "B"'


---

ğŸ•’ ç„¶åä½ åœ¨ UI ä¸­è®¾ç½®ä¸¤ä¸ªå®šæ—¶ä»»åŠ¡ï¼š

ä»»åŠ¡ä¸€ï¼ˆæ¯å¤© 6 ç‚¹ï¼‰ï¼š

Cronï¼š0 6 * * *

åˆ†æ”¯ï¼šmain

Variableï¼šRUN_TYPE=A


ä»»åŠ¡äºŒï¼ˆæ¯å¤© 7 ç‚¹ï¼‰ï¼š

Cronï¼š0 7 * * *

åˆ†æ”¯ï¼šmain

Variableï¼šRUN_TYPE=B



---

è¿™æ ·å®šæ—¶ä»»åŠ¡å°±â€œæ¨¡æ‹Ÿäº†é€‰æ‹©ä¸åŒçš„ pipelineâ€ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”± .gitlab-ci.yml çš„é€»è¾‘åˆ¤æ–­æ¥æ§åˆ¶ä½ æƒ³è¦çš„æ‰§è¡Œè·¯å¾„ã€‚


---

âœ… å¦‚æœä½ ç¡®å®æœ‰å¤šä¸ªä¸åŒçš„ .gitlab-ci.ymlï¼ˆå¤š pipeline æ–‡ä»¶ï¼‰

ä¹Ÿå¯ä»¥ä½¿ç”¨ include + å˜é‡æ§åˆ¶ï¼š

include:
  - local: '/pipelines/pipeline_a.yml'
    rules:
      - if: '$RUN_TYPE == "A"'

  - local: '/pipelines/pipeline_b.yml'
    rules:
      - if: '$RUN_TYPE == "B"'


---

ğŸ”š æ€»ç»“

ä½ æƒ³è¦åšçš„äº‹	GitLab æ€ä¹ˆå®ç°

å®šæ—¶è·‘æŸä¸ª pipeline	é€šè¿‡å®šæ—¶ä»»åŠ¡è®¾ç½® + åˆ†æ”¯ + å˜é‡
â€œé€‰æ‹©ä¸åŒ pipelineâ€ çš„æ•ˆæœ	åœ¨ .gitlab-ci.yml ä¸­ç”¨å˜é‡å’Œ rules åŒºåˆ†ä¸åŒé€»è¾‘
å¤šä¸ª pipeline æ–‡ä»¶ç»„åˆ	ç”¨ include: å’Œå˜é‡ç»„åˆé€‰æ‹©æ€§å¼•å…¥



---

å¦‚æœä½ æ„¿æ„æä¾›ä½ çš„ .gitlab-ci.yml æˆ–ä½ æƒ³è¦çš„â€œä¸åŒ pipeline ç»„åˆâ€ï¼Œæˆ‘å¯ä»¥å¸®ä½ ç›´æ¥æ”¹å†™æˆå¸¦å˜é‡æ§åˆ¶ã€å®šæ—¶è§¦å‘çš„æ–¹å¼ã€‚ä½ åªè¦å‘Šè¯‰æˆ‘ï¼š

ä½ å¸Œæœ›å‡ ç‚¹è¿è¡Œï¼Ÿ

åˆ†åˆ«è¿è¡Œå“ªäº› jobs æˆ–ç»„åˆï¼Ÿ


