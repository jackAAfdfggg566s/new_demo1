ç»™ä½  æœ€ç®€ã€æœ€å‡†ã€ç”Ÿäº§å¯ç”¨çš„ä¸€æ¡æ–¹æ¡ˆğŸ‘‡
åªåˆ—å‡ºæŸä¸ª Aurora cluster ä¸‹ã€ŒWRITER å®ä¾‹çš„ AZã€
âœ… ä¸€æ¡å‘½ä»¤ï¼ˆæ¨èï¼Œ100% å‡†ï¼‰
å¤åˆ¶ä»£ç 
Bash
CLUSTER=your-cluster-name

aws rds describe-db-instances \
  --query "DBInstances[?DBInstanceIdentifier==\`$(aws rds describe-db-clusters \
    --db-cluster-identifier $CLUSTER \
    --query 'DBClusters[0].DBClusterMembers[?IsClusterWriter==`true`].DBInstanceIdentifier' \
    --output text)\`].[DBInstanceIdentifier,AvailabilityZone]" \
  --output table
è¾“å‡ºç¤ºä¾‹
å¤åˆ¶ä»£ç 

-----------------------------------------
|          DescribeDBInstances           |
+----------------------+-----------------+
|  mydb-instance-1     | ap-southeast-2a |
+----------------------+-----------------+
ğŸ§  åŸç†ï¼ˆä½ è¿™ä¸ªé—®é¢˜çš„å…³é”®ç‚¹ï¼‰
WRITER æ˜¯ cluster çº§æ¦‚å¿µ
describe-db-instances âŒ ä¸å¯é 
å¿…é¡»å…ˆä» describe-db-clusters æ‰¾ IsClusterWriter=true
å†ç”¨ instance API æŸ¥ AZ
è¿™æ¡å‘½ä»¤æ­£æ˜¯ å®˜æ–¹æ¨èé“¾è·¯ã€‚
ğŸ§© å¦‚æœä½ æƒ³è¦ã€Œåªè¾“å‡º AZã€ï¼ˆä¸ç»™å®ä¾‹åï¼‰
å¤åˆ¶ä»£ç 
Bash
CLUSTER=your-cluster-name

aws rds describe-db-instances \
  --query "DBInstances[?DBInstanceIdentifier==\`$(aws rds describe-db-clusters \
    --db-cluster-identifier $CLUSTER \
    --query 'DBClusters[0].DBClusterMembers[?IsClusterWriter==`true`].DBInstanceIdentifier' \
    --output text)\`].AvailabilityZone" \
  --output text
è¾“å‡ºï¼š
å¤åˆ¶ä»£ç 

ap-southeast-2a
âš ï¸ æ³¨æ„äº‹é¡¹ï¼ˆå¾ˆé‡è¦ï¼‰
åªé€‚ç”¨äº Aurora
Failover åè¿™æ¡å‘½ä»¤ è‡ªåŠ¨è¿”å›æ–° writer
ä¸ä¾èµ– DBInstanceRoleï¼ˆé¿å…ä½ åˆšæ‰é‚£ä¸ªå‘ï¼‰
å¦‚æœä½ ä¸‹ä¸€æ­¥æ˜¯è¦ï¼š
ğŸ‘‰ writer AZ â†’ subnet id
ğŸ‘‰ writer AZ â†’ scale / stop æŸäº› pod
ğŸ‘‰ writer / reader åˆ†åˆ«è¾“å‡º AZ
ç›´æ¥è¯´ç›®æ ‡ï¼Œæˆ‘å¸®ä½ æ”¹æˆ ä¸€æ¡æ—  for-loop çš„å‘½ä»¤ã€‚