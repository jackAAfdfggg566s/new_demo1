ä½ è¿™ä¸ªæŠ¥é”™å¾ˆåˆç†â€”â€”è¿™ä¸æ˜¯ä½ é…ç½®é”™ï¼Œè€Œæ˜¯ FIS Console é‡Œç¡®å®â€œçœ‹èµ·æ¥è¿ä¸ä¸Š AZâ€ï¼Œå› ä¸º AZ ä¸èƒ½è¢«ç›´æ¥å½“ä½œå¯é€‰ç›®æ ‡èµ„æºæ¥æ‰‹åŠ¨æŒ‘é€‰ã€‚æˆ‘ç»™ä½ å¯çœŸæ­£èƒ½è¿èµ·æ¥çš„æ­£ç¡®åšæ³• + å¯è¿è¡Œæ¨¡æ¿ã€‚
âœ… æ ¸å¿ƒä¿®æ­£ï¼ˆæœ€é‡è¦ï¼‰
ğŸ‘‰ ä¸è¦ç”¨ï¼š
å¤åˆ¶ä»£ç 

aws:ec2:availability-zone   âŒï¼ˆåœ¨ FIS UI é‡Œå¾ˆéš¾ç›´æ¥é€‰ï¼‰
ğŸ‘‰ æ”¹æˆï¼šç”¨ AZ é‡Œçš„ å­ç½‘(subnet) ä½œä¸º Target âœ”ï¸
æœ¬è´¨ä¸Šæ•ˆæœä¸€æ ·ï¼š
ğŸ‘‰ â€œæŠŠæŸä¸ª AZ çš„ç½‘ç»œæ‰“æ–­ = æŠŠè¯¥ AZ çš„å­ç½‘ç½‘ç»œæ‰“æ–­â€ã€‚
ä¸€ã€ä½ éœ€è¦å…ˆåšä¸€ä»¶äº‹ï¼ˆ30 ç§’å°±èƒ½æå®šï¼‰
æ‰¾åˆ° Primary æ‰€åœ¨ AZ çš„ä¸€ä¸ª Subnet
åœ¨ AWS Consoleï¼š
è¿› RDS â†’ ä½ çš„å®ä¾‹ â†’ Connectivity
è®°ä¸‹ï¼š
Primary æ‰€åœ¨ AZï¼ˆæ¯”å¦‚ apse2-az1ï¼‰
å†å»ï¼š
VPC â†’ Subnets
è¿‡æ»¤ï¼š
Availability Zone = apse2-az1
å¤åˆ¶ ä»»æ„ä¸€ä¸ª Subnet IDï¼Œä¾‹å¦‚ï¼š
å¤åˆ¶ä»£ç 

subnet-0a123456789abcde
ğŸ‘‰ è¿™ä¸ªå°±æ˜¯ä½  FIS çš„ Targetã€‚
äºŒã€å¯ç›´æ¥è¿èµ·æ¥çš„ FIS æ¨¡æ¿ï¼ˆæ–¹æ³• 3ï¼‰
ä¸‹é¢è¿™ä¸ªä¸€å®šèƒ½åœ¨ Console é€‰åˆ° Targetï¼š
å¤åˆ¶ä»£ç 
Json
{
  "description": "Disrupt all network connectivity in primary AZ subnet to trigger RDS failover",
  "targets": {
    "PrimarySubnet": {
      "resourceType": "aws:ec2:subnet",
      "resourceArns": [
        "arn:aws:ec2:<REGION>:<ACCOUNT_ID>:subnet/<YOUR_SUBNET_ID>"
      ],
      "selectionMode": "ALL"
    }
  },
  "actions": {
    "DisruptAZNetwork": {
      "actionId": "aws:ec2:network-disrupt-connectivity",
      "parameters": {
        "scope": "ALL",
        "duration": "PT120S"
      },
      "targets": {
        "Subnets": "PrimarySubnet"
      }
    }
  },
  "roleArn": "arn:aws:iam::<ACCOUNT_ID>:role/Your-FIS-Role",
  "tags": {
    "Name": "rds-az-failover-chaos-test"
  }
}
ä¸‰ã€ä½ éœ€è¦æ›¿æ¢çš„ä¸‰å¤„
1ï¸âƒ£ Region
ä¾‹å¦‚ï¼š
å¤åˆ¶ä»£ç 

ap-southeast-2
2ï¸âƒ£ Account ID
ä½ çš„ AWS è´¦å· IDã€‚
3ï¸âƒ£ å…³é”®ï¼šSubnet ID
æŠŠï¼š
å¤åˆ¶ä»£ç 

subnet/<YOUR_SUBNET_ID>
æ”¹æˆä½ åˆšæ‰åœ¨ VPC é‡Œå¤åˆ¶çš„ï¼Œæ¯”å¦‚ï¼š
å¤åˆ¶ä»£ç 

arn:aws:ec2:ap-southeast-2:123456789012:subnet/subnet-0a123456789abcde
å››ã€è¿è¡Œåä½ ä¼šçœ‹åˆ°ä»€ä¹ˆ
å¦‚æœä½ æ˜¯ RDS Multi-AZï¼š
30â€“120 ç§’å†…å¤§æ¦‚ç‡è§¦å‘ failover
Primary ä¼šåˆ‡åˆ°å¦ä¸€ AZ
åŸ AZ æ¢å¤åå˜ Standby
ä½ å¯ä»¥åœ¨ RDS æ§åˆ¶å°ç¡®è®¤ï¼š
Writer AZ å˜äº† âœ…
Event log é‡Œæœ‰ Failover initiated âœ…
äº”ã€å¦‚æœä½ â€œè¿˜æƒ³æ›´ç‹ ä¸€ç‚¹â€
ä½ ä¹Ÿå¯ä»¥ä¸€æ¬¡é€‰å¤šä¸ª subnetï¼ˆåŒä¸€ AZï¼‰ï¼š
å¤åˆ¶ä»£ç 
Json
"resourceArns": [
  "arn:aws:ec2:ap-southeast-2:123456789012:subnet/subnet-aaaa",
  "arn:aws:ec2:ap-southeast-2:123456789012:subnet/subnet-bbbb"
]
è¿™æ ·ç­‰ä»·äºï¼š
ğŸ‘‰ æ›´æ¥è¿‘â€œæ•´ä¸ª AZ ç½‘ç»œå‡ºé—®é¢˜â€ã€‚
å…­ã€æˆ‘å¯ä»¥å¸®ä½ å¡«å®Œæ•´æ¨¡æ¿
ä½ åªéœ€è¦æŠŠä¸‹é¢ä¸‰è¡Œå‘ç»™æˆ‘ï¼š
1ï¸âƒ£ Regionï¼ˆä¾‹å¦‚ ap-southeast-2ï¼‰
2ï¸âƒ£ ä½ çš„ Account ID
3ï¸âƒ£ Primary æ‰€åœ¨ AZ çš„ ä¸€ä¸ª subnet ID
æˆ‘å¸®ä½ æŠŠæœ€ç»ˆå¯ç›´æ¥ç²˜è´´çš„å®Œæ•´ JSONå¡«å¥½ç»™ä½ ã€‚