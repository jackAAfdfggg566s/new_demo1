OK ğŸ‘
åªè·å–å…¶ä¸­ä¸€ä¸ª readerï¼ˆä»åº“ï¼‰çš„ AZï¼Œå¹¶ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ï¼Œç»™ä½ æœ€ç®€å•ã€æœ€ç¨³çš„å†™æ³•ã€‚
âœ… æ¨èï¼šç›´æ¥æ‹¿ã€Œç¬¬ä¸€ä¸ª readerã€
å¤åˆ¶ä»£ç 
Bash
CLUSTER=your-cluster-name

READER_AZ=$(
  aws rds describe-db-clusters \
    --db-cluster-identifier "$CLUSTER" \
    --query 'DBClusters[0].DBClusterMembers[?IsClusterWriter==`false`].DBInstanceIdentifier | [0]' \
    --output text \
  | xargs aws rds describe-db-instances \
      --query 'DBInstances[0].AvailabilityZone' \
      --output text
)
ä½¿ç”¨
å¤åˆ¶ä»£ç 
Bash
echo "reader az: $READER_AZ"
ğŸ§  è¯´æ˜ï¼ˆå…³é”®ç‚¹ï¼‰
IsClusterWriter=false âœ… å”¯ä¸€å¯é åˆ¤æ–­
[0] è¡¨ç¤º åªå–ä¸€ä¸ª reader
reader æœ‰ 1 ä¸ªæˆ–å¤šä¸ªéƒ½èƒ½è·‘
Failover åè‡ªåŠ¨å–å½“å‰ reader
âš ï¸ æ³¨æ„äº‹é¡¹
å“ªä¸ª reader æ˜¯â€œç¬¬ä¸€ä¸ªâ€å¹¶ä¸å›ºå®š
AWS è¿”å›é¡ºåºå¯èƒ½å˜åŒ–
å¦‚æœä½ éœ€è¦ æŒ‡å®šè§„åˆ™ï¼Œæ¯”å¦‚ï¼š
æ’é™¤æŸä¸ª AZ
å›ºå®šæ‹¿ ap-southeast-2b çš„ reader
æŒ‰ AZ æ’åºåå–ä¸€ä¸ª
é‚£è„šæœ¬éœ€è¦ç¨å¾®æ”¹ä¸€ä¸‹
ğŸ”§ ä¾‹ï¼šæŒ‡å®š AZ çš„ readerï¼ˆå¦‚æœå­˜åœ¨ï¼‰
å¤åˆ¶ä»£ç 
Bash
TARGET_AZ=ap-southeast-2b

READER_AZ=$(
  aws rds describe-db-instances \
    --query "DBInstances[?DBClusterIdentifier=='$CLUSTER' && AvailabilityZone=='$TARGET_AZ'].AvailabilityZone | [0]" \
    --output text
)
å¦‚æœä½ ä¸‹ä¸€æ­¥æ˜¯ï¼š
ğŸ‘‰ æ’é™¤ writer AZ
ğŸ‘‰ æŒ‡å®š AZ æ‹¿ reader
ğŸ‘‰ reader AZ â†’ subnet
ç›´æ¥è¯´ç›®æ ‡ï¼Œæˆ‘ç»™ä½ ä¸€æ¡æ›´ç²¾å‡†çš„å‘½ä»¤ã€‚