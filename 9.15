ä½ è¿™ä¸ªé—®é¢˜å…¶å®åˆ†ä¸¤éƒ¨åˆ†ï¼šæ€ä¹ˆæŠŠ AWS RDS Database Insights çš„æŒ‡æ ‡å±•ç¤ºåˆ°è‡ªå·±å¤§ç›˜ï¼Œä»¥åŠ éœ€è¦å“ªäº› IAM æƒé™ã€‚æˆ‘å¸®ä½ æ¢³ç†ä¸€ä¸‹ï¼š


---

ğŸ”¹ 1. Database Insights æ•°æ®æ¥æº

RDS Database Insightsï¼ˆPerformance Insights / DB Insightsï¼‰æœ¬è´¨ä¸Šæ˜¯é€šè¿‡ CloudWatch Metrics + Enhanced Monitoring + Performance Insights API æä¾›çš„ã€‚
è¦åœ¨è‡ªå·±çš„ dashboard å±•ç¤ºï¼Œæœ‰å‡ ç§æ–¹å¼ï¼š

CloudWatch Dashboard
ç›´æ¥åœ¨ CloudWatch é‡Œå»º dashboardï¼Œé€‰æ‹© RDS æŒ‡æ ‡ï¼ˆCPUã€å†…å­˜ã€IOã€Active sessions ç­‰ï¼‰ã€‚

è‡ªå®šä¹‰å¤§ç›˜ï¼ˆGrafana, Prometheus, Datadog ç­‰ï¼‰
é€šè¿‡ AWS APIs æ‹‰å–æ•°æ®ï¼š

cloudwatch:GetMetricData

pi:GetResourceMetricsï¼ˆPerformance Insights ä¸“ç”¨ï¼‰




---

ğŸ”¹ 2. éœ€è¦çš„æƒé™

å¦‚æœæ˜¯åªçœ‹æ™®é€šæŒ‡æ ‡ï¼ˆCloudWatch + Enhanced Monitoringï¼‰ï¼š

{
  "Effect": "Allow",
  "Action": [
    "cloudwatch:GetMetricData",
    "cloudwatch:GetMetricStatistics",
    "cloudwatch:ListMetrics",
    "logs:DescribeLogStreams",
    "logs:GetLogEvents"
  ],
  "Resource": "*"
}

å¦‚æœè¦è®¿é—® Performance Insights (Database Insights)ï¼Œéœ€è¦ï¼š

{
  "Effect": "Allow",
  "Action": [
    "pi:DescribeDimensionKeys",
    "pi:GetDimensionKeyDetails",
    "pi:GetResourceMetrics"
  ],
  "Resource": "*"
}

åŒæ—¶ï¼Œè¿˜éœ€è¦å¯¹ RDS å®ä¾‹æœ¬èº«çš„åªè¯»æƒé™ï¼š

{
  "Effect": "Allow",
  "Action": [
    "rds:DescribeDBInstances",
    "rds:ListTagsForResource"
  ],
  "Resource": "*"
}


---

ğŸ”¹ 3. å¸¸è§å±•ç¤ºæ–¹å¼

CloudWatch Dashboardï¼ˆAWS è‡ªå¸¦å¤§ç›˜ï¼Œæœ€çœäº‹ï¼‰

Amazon Managed Grafanaï¼ˆå®˜æ–¹æ‰˜ç®¡ Grafanaï¼Œå¯ä»¥ç›´æ¥é€‰ CloudWatchã€RDS PI æ•°æ®æºï¼‰

è‡ªå»º Grafanaï¼ˆç”¨ cloudwatch æ’ä»¶æˆ–è€… AWS PI æ’ä»¶ï¼‰



---

âš¡æ€»ç»“ï¼š
ä½ è¦åœ¨è‡ªå·±å¤§ç›˜å±•ç¤º RDS Database Insights æ•°æ®ï¼Œå¿…é¡»è‡³å°‘æœ‰ CloudWatch + Performance Insights API çš„è¯»æƒé™ã€‚
æœ€å°æƒé™ç»„åˆæ˜¯ï¼š

cloudwatch:Get*

pi:Get*

pi:Describe*

rds:Describe*



---

è¦ä¸è¦æˆ‘ç»™ä½ å†™ä¸€ä¸ª å®Œæ•´çš„ IAM policy JSONï¼Œç›´æ¥èƒ½ç»‘å®šç»™ Grafana æˆ– CI/CD è§’è‰²æ¥æ‹‰æ•°æ®ï¼Ÿ

