æ˜ç™½ ğŸ‘ã€‚ä½ æ˜¯æƒ³æ‹¿ Pod è¢« kill/delete çš„ç²¾ç¡®æ—¶é—´ç‚¹ï¼Œç„¶åè·Ÿæ¢å¤æ—¶é—´åšå¯¹æ¯”ï¼Œç®— RTOã€‚
é—®é¢˜æ˜¯ï¼škubectl describe pod é‡Œçš„ Events éƒ¨åˆ†åªæ˜¾ç¤ºç›¸å¯¹æ—¶é—´ï¼ˆæ¯”å¦‚ 1m agoï¼‰ï¼Œä¸å¤Ÿç²¾ç¡®ã€‚

è¿™é‡Œæœ‰å‡ ç§æ›´å¯é çš„å–æ³•ï¼š


---

1. kubectl get events -o wide

kubectl get events -n <namespace> --sort-by=.lastTimestamp -o wide

è¿™ä¸ªä¼šè¾“å‡ºäº‹ä»¶çš„ ç»å¯¹æ—¶é—´æˆ³ (LAST SEEN)ï¼Œæ¯”å¦‚ï¼š

LAST SEEN   TYPE    REASON    OBJECT           MESSAGE
2025-09-19T08:32:41Z  Normal  Killing   pod/myapp-xyz  Stopping container myapp
2025-09-19T08:32:41Z  Normal  Deleted   pod/myapp-xyz  Deleted pod: myapp-xyz

è¿™ä¸ªæ—¶é—´å°±æ˜¯ä½ è¦çš„ â€œPod è¢« kill/deleteâ€ çš„çœŸå®æ—¶é—´ã€‚



---

2. è·å– deletionTimestamp

å¦‚æœ Pod è¿˜æ²¡å®Œå…¨æ¸…ç†æ‰ï¼š

kubectl get pod <pod> -n <ns> -o jsonpath='{.metadata.deletionTimestamp}'

ç»“æœæ˜¯ ISO8601 æ ¼å¼çš„ UTC æ—¶é—´ï¼Œæ¯”å¦‚ï¼š

2025-09-19T08:32:41Z


---

3. ç»“åˆ kubectl get events + jq

ä½ å¯ä»¥ç›´æ¥ç­›å‡º Pod åˆ é™¤ç›¸å…³çš„äº‹ä»¶ï¼š

kubectl get events -n <namespace> -o json \
  | jq -r '.items[] | select(.reason=="Killing" or .reason=="Deleted") 
  | [.lastTimestamp, .involvedObject.name, .reason, .message] | @tsv'

è¾“å‡ºï¼š

2025-09-19T08:32:41Z   myapp-xyz   Killing   Stopping container myapp
2025-09-19T08:32:41Z   myapp-xyz   Deleted   Deleted pod: myapp-xyz


---

4. å·²ç»è¿‡ retentionï¼ˆäº‹ä»¶è¢«æ¸…ç†ï¼‰

å¦‚æœé›†ç¾¤äº‹ä»¶ä¿ç•™æœŸå¤ªçŸ­ï¼ˆé»˜è®¤ 1 å°æ—¶åˆ° 24 å°æ—¶ï¼‰ï¼ŒPod åˆ é™¤å†å²å°±æŸ¥ä¸åˆ°äº†ã€‚
è¿™ç§æƒ…å†µå»ºè®®ï¼š

æ‰“å¼€ Audit Logï¼ˆK8s API server æ—¥å¿—ï¼‰

æˆ–è€…ç”¨ Prometheus/ELK é‡‡é›† kube-eventï¼ŒæŒä¹…ä¿å­˜



---

âš¡ æ€»ç»“ï¼š

æœ€ç›´æ¥ï¼škubectl get events -o wide â†’ æœ‰å®Œæ•´æ—¶é—´æˆ³

Pod ä»å­˜åœ¨ï¼šæŸ¥ metadata.deletionTimestamp

å†å²æ•°æ®ï¼šéœ€è¦ä¾èµ–æ—¥å¿—æˆ–ç›‘æ§



---

è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œè¾“å…¥ Pod åå­—ï¼Œå°±ç›´æ¥æ‰“å°å‡º åˆ›å»ºæ—¶é—´ + åˆ é™¤æ—¶é—´ï¼Œæ–¹ä¾¿ä½ ç®— RTOï¼Ÿ

