ä½ å¯ä»¥é€šè¿‡ CloudWatch Logs Insights æŸ¥è¯¢è¯­å¥ï¼Œæ¥ç­›é€‰å‡ºæ—¥å¿—ä¸­åŒ…å« fix-xxxï¼Œå¹¶æå–å‡ºä¸åŒçš„ xxxï¼ˆä¾‹å¦‚ tradeIdï¼‰ï¼Œå†è¿›è¡Œå»é‡ç»Ÿè®¡ã€‚


---

âœ… å‡è®¾ä½ çš„æ—¥å¿—æ ¼å¼å¦‚ä¸‹ï¼ˆä»»æ„åŒ…å«ï¼‰ï¼š

... fix-123456 ...
... fix-abcde ...
... fix-789xyz ...


---

âœ… Logs Insights æŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼š

fields @message
| filter @message like /fix-[\w-]+/
| parse @message /fix-(?<tradeId>[\w-]+)/
| stats count_distinct(tradeId) as unique_tradeId_count


---

ğŸ” è¯´æ˜ï¼š

filter @message like /fix-[\w-]+/ï¼šç­›é€‰å‡ºåŒ…å« fix-xxx çš„æ—¥å¿—ã€‚

parse @message /fix-(?<tradeId>[\w-]+)/ï¼šæå–å‡º fix-xxx ä¸­çš„ xxx å¹¶å‘½åä¸º tradeIdã€‚

count_distinct(tradeId)ï¼šç»Ÿè®¡å”¯ä¸€ tradeId çš„æ•°é‡ã€‚



---

âœ… å¦‚æœä½ è¿˜æƒ³è¾“å‡ºæ¯ä¸ª tradeId å‡ºç°çš„æ¬¡æ•°ï¼š

fields @message
| filter @message like /fix-[\w-]+/
| parse @message /fix-(?<tradeId>[\w-]+)/
| stats count(*) as occurrences by tradeId
| sort occurrences desc


---

âœ… å¦‚æœä½ æœ‰å¤šä¸ª log groupï¼Œå¯ä»¥åœ¨ Logs Insights ä¸­ä¸€æ¬¡æ€§æŸ¥è¯¢ï¼š

1. è¿›å…¥ CloudWatch Logs Insightsã€‚


2. åœ¨æŸ¥è¯¢é¡¶éƒ¨é€‰æ‹©å¤šä¸ª log groupã€‚


3. å¤åˆ¶ä¸Šè¿°è¯­å¥ç²˜è´´è¿›å»è¿è¡Œã€‚




---

å¦‚æœä½ æä¾›ä¸€æ®µå…¸å‹çš„æ—¥å¿—å†…å®¹ï¼ˆè„±æ•åï¼‰ï¼Œæˆ‘å¯ä»¥å¸®ä½ å®šåˆ¶æ›´å‡†ç¡®çš„ parse è¯­å¥ã€‚éœ€è¦å—ï¼Ÿ

