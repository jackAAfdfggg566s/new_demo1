这个点很关键 ⚡，得区分清楚 Aurora Custom Endpoint 的作用范围和 故障切换 (failover) 行为。


---

1. Custom Endpoint 的本质

它只是一个 DNS 别名，指向你挑选的一组 Aurora 实例（writer 或 reader 或混合）。

不做连接池，不做状态管理，完全是 DNS 解析层。



---

2. 如果你配置的 Custom Endpoint 里包含 Writer

假设 custom endpoint 里只有 writer：

Writer 挂掉 → Aurora 自动 failover，一个 reader 升级为新的 writer。

但是 custom endpoint 不会自动指向新的 writer，因为 custom endpoint 绑定的是“实例池”，而不是“角色”。

结果：应用连这个 endpoint，会连到旧 writer（已挂），直到 DNS 更新或你手动调整实例池。



👉 所以 如果 custom endpoint 只包含 writer，failover 时应用可能会连不上，需要应用端重试并等 DNS 刷新，或者你更新 custom endpoint 的成员。


---

3. 如果你配置的 Custom Endpoint 里包含 Readers

如果 endpoint 是读流量池（只包含 readers）：

Writer 挂了不影响，因为 readers 还在。

但注意，升格成新的 writer 的实例会从 custom endpoint 池里消失（因为 custom endpoint 当时选的是 “reader role 实例”）。




---

4. 正确的做法

写流量：用 Cluster endpoint（它永远指向当前 writer，failover 时会自动更新）。

读流量：用 Reader endpoint（它永远只包含所有可用 reader，failover 不受影响）。

Custom endpoint：只推荐用于特殊读流量分组（比如“报表专用的几个 reader”）。

不适合承载写流量，因为 failover 时它不会自动切换到新的 writer。




---

🔑 总结

Custom endpoint 不具备自动 failover 的语义。

如果 主挂了：

用 custom endpoint 指向 writer → ❌ 应用不能透明重连。

用 cluster endpoint → ✅ 可以自动连到新 writer。




---

要不要我帮你整理一个 “各类 endpoint 在 failover 下的行为对比表”，让你直观对比 cluster / reader / custom？

