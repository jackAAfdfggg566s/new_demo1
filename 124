å¦‚æœä½ åªæ˜¯æƒ³ è¿‡æ»¤å‡ºçœŸæ­£ Runningï¼ˆæ­£å¸¸è¿è¡Œï¼‰ çš„ Podï¼Œå¹¶ä¸” ä¸åŒ…å« CrashLoopBackOffã€Errorã€Init ç­‰å¼‚å¸¸çŠ¶æ€ï¼Œæœ€ç¨³å¦¥çš„æ–¹å¼æ˜¯ä¸‹é¢è¿™ä¸¤ç§ã€‚


---

âœ… æ–¹æ³• 1ï¼šæœ€ç®€å•ã€å®‰å…¨

åªè¿‡æ»¤å‡º STATUS å­—æ®µä¸º â€œRunningâ€ çš„ Podï¼š

kubectl get pods --field-selector=status.phase=Running

âš ï¸ æ³¨æ„

status.phase=Running ä¸ä¼šæŠŠ CrashLoopBackOff çš„ Pod è¿‡æ»¤è¿›æ¥ï¼Œå› ä¸º CrashLoopBackOff çš„ phase é€šå¸¸æ˜¯ Running æ²¡é”™, ä½† condition Ready=Falseã€‚
æ‰€ä»¥è¿™ä¸ªå‘½ä»¤èƒ½ä¿è¯ï¼š

âœ” ä¸ä¼šåŒ…å« Pending / Failed / Succeeded / Unknown
âœ” ä¸ä¼šåŒ…å«åˆšåˆ›å»ºçš„
â— ä½†æ˜¯ä»ä¼šæŠŠ â€œRunning + CrashLoopBackOffâ€ ä¹ŸåŒ…å«è¿›æ¥ï¼ˆå› ä¸º phase è¿˜æ˜¯ Runningï¼‰

å¦‚æœä½ åªæƒ³è¿‡æ»¤å‡ºæ¥ Runningï¼ˆä¸ç®¡æ˜¯å¦ Readyï¼‰ï¼Œç”¨ä¸Šé¢è¿™ä¸ªå³å¯ã€‚

ä½†å¦‚æœä½ æŒ‡ åªè¦çœŸæ­£å¥åº·çš„ Runningï¼ˆæ’é™¤ CrashLoopBackOffï¼‰ï¼Œé‚£ä½ éœ€è¦æ–¹æ³• 2ã€‚


---

âœ… æ–¹æ³• 2ï¼šè¿‡æ»¤ Running ä¸” Ready çš„ Podï¼ˆæ¨èï¼‰

çœŸæ­£å¥åº·çš„ Pod å¿…é¡»æ»¡è¶³ 2 ç‚¹ï¼š

1. phase = Running


2. Ready condition = True



kubectl get pods \
  -o jsonpath='{range .items[?(@.status.phase=="Running")]}{.metadata.name}{"\t"}{.status.conditions[?(@.type=="Ready")].status}{"\n"}{end}' \
  | grep True

è¾“å‡ºåªä¼šæ˜¯ï¼š

my-app-1   True
my-worker-2 True

ğŸ‘ è¿™æ ·èƒ½è¿‡æ»¤æ‰ï¼š

CrashLoopBackOffï¼ˆReady=Falseï¼‰

ImagePullBackOff

Error

InitError

NotReady


åªç•™ä¸‹ çœŸæ­£å¥åº·çš„ Runningã€‚


---

âœ… æœ€çŸ­å‘½ä»¤ï¼ˆæˆ‘å»ºè®®ä½ ç”¨è¿™ä¸ªï¼‰

kubectl get pods | grep "Running" | grep "1/1"

å¯¹äºå¤šå®¹å™¨ Podï¼š

kubectl get pods | awk '$3=="Running" && $2==$2 {print}'

å¦‚æœä½ å‘Šè¯‰æˆ‘ä½ æ˜¯ å•å®¹å™¨ Pod è¿˜æ˜¯ å¤šå®¹å™¨ Podï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸€ä¸ªæ›´å‡†ç¡®çš„è¿‡æ»¤å‘½ä»¤ï¼ˆé¿å…è¯¯åˆ¤ï¼‰ã€‚