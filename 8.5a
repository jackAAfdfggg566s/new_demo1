ä½ é—®å¾—å¾ˆå…³é”® ğŸ‘
è¦æŸ¥ Aurora é›†ç¾¤ Writer instance æ‰€åœ¨çš„ AZï¼Œå¯ä»¥ç”¨ AWS CLI å¾ˆç›´æ¥åœ°è·å–ã€‚

æˆ‘ç»™ä½ å‡ ä¸ªå¸¸ç”¨æ–¹æ³•ï¼š


---

1ï¸âƒ£ ç”¨ describe-db-instances æŸ¥è¯¢

æ¯ä¸ªå®ä¾‹ï¼ˆWriter / Readerï¼‰éƒ½ä¼šæ˜¾ç¤ºå®ƒçš„ AZã€‚

aws rds describe-db-instances \
  --db-instance-identifier <writer_instance_id> \
  --query "DBInstances[0].AvailabilityZone" \
  --output text

è¾“å‡ºç¤ºä¾‹ï¼š

ap-southeast-2a

> è¿™ä¸ªå‘½ä»¤ç›´æ¥å‘Šè¯‰ä½  Writer å®ä¾‹åœ¨å“ªä¸ª AZã€‚




---

2ï¸âƒ£ ç”¨ describe-db-clusters æ‰¾å‡º Writerï¼Œç„¶åæŸ¥å®ƒçš„ AZ

å¦‚æœä½ ä¸çŸ¥é“ Writer çš„å®ä¾‹ IDï¼Œå¯ä»¥å…ˆæŸ¥é›†ç¾¤ï¼š

aws rds describe-db-clusters \
  --db-cluster-identifier <cluster_id> \
  --query "DBClusters[0].DBClusterMembers[?IsClusterWriter==`true`].DBInstanceIdentifier" \
  --output text

è¾“å‡ºç¤ºä¾‹ï¼š

my-writer-instance

ç„¶åå†æŸ¥è¿™ä¸ªå®ä¾‹çš„ AZï¼š

aws rds describe-db-instances \
  --db-instance-identifier my-writer-instance \
  --query "DBInstances[0].AvailabilityZone" \
  --output text


---

3ï¸âƒ£ ä¸€è¡Œå‘½ä»¤ç›´æ¥è·å– Writer çš„ AZ

å¦‚æœæƒ³ä¸€æ­¥åˆ°ä½ï¼š

aws rds describe-db-clusters \
  --db-cluster-identifier <cluster_id> \
  --query "DBClusters[0].DBClusterMembers[?IsClusterWriter==\`true\`].DBInstanceIdentifier" \
  --output text | xargs -I {} \
aws rds describe-db-instances \
  --db-instance-identifier {} \
  --query "DBInstances[0].AvailabilityZone" \
  --output text

è¾“å‡ºç¤ºä¾‹ï¼š

ap-southeast-2a


---

æˆ‘é¡ºä¾¿é—®ä¸€ä¸‹ï¼Œä½ æ˜¯æƒ³æŸ¥ Writer AZ æ˜¯ä¸ºäº†åšæ•…éšœè½¬ç§»æµ‹è¯•ï¼Œè¿˜æ˜¯ä¸ºäº†éªŒè¯ ä¸ºä»€ä¹ˆ CLI æ˜¾ç¤ºäº† 3 ä¸ª AZï¼Ÿ
æˆ‘å¯ä»¥é¡ºä¾¿å¸®ä½ åŠ ä¸Š åŒæ—¶è¾“å‡º Reader çš„ AZ åˆ†å¸ƒï¼Œæ–¹ä¾¿ä½ å¯¹æ¯”ã€‚

