å¾ˆå¥½ï¼Œè¿™ä¸ªè¡¥å……éå¸¸å…³é”®â€”â€”â€œAWS CLI è¿”å›çš„å€¼èƒ½æ‰“å°ä½†è¿›ä¸äº†æ•°ç»„â€å‡ ä¹æ˜¯ä¸€ä¸ªå›ºå®šå¥—è·¯é—®é¢˜ã€‚
æˆ‘ç›´æ¥ç»™ä½ åŸå›  + 100% èƒ½ç”¨çš„æ”¹æ³• + æœ€å°å¯éªŒè¯ç¤ºä¾‹ï¼Œä½ ç…§ç€æ¢å°±è¡Œã€‚
ğŸ¯ æ ¹æœ¬åŸå› ï¼ˆä½ æ­£åœ¨è¸©çš„å‘ï¼‰
AWS CLI è¿”å›çš„ subnet id é€šå¸¸ä¸æ˜¯â€œå¹²å‡€å­—ç¬¦ä¸²â€ï¼Œå¸¸è§é—®é¢˜æœ‰ä¸‰ç§ï¼š
å¸¦éšè—æ¢è¡Œ \r æˆ– \n
å¸¦ç©ºæ ¼/æ§åˆ¶å­—ç¬¦
ä¸æ˜¯çº¯æ–‡æœ¬è¾“å‡ºï¼ˆjson/tableï¼‰ï¼Œè€Œä½ å½“å­—ç¬¦ä¸²ç”¨äº†
ğŸ‘‰ ç»“æœï¼š
echo $subnet çœ‹èµ·æ¥æ­£å¸¸
ä½† arr+=("$subnet") å®é™…æ’å…¥çš„æ˜¯â€œè„å€¼â€ï¼Œæ•°ç»„éå†æ—¶åƒæ˜¯ç©ºçš„
âœ… ä½ åº”è¯¥ç»Ÿä¸€ç”¨çš„â€œæ ‡å‡†å§¿åŠ¿â€ï¼ˆæ¨èï¼Œæœ€ç¨³å¦¥ï¼‰
ç¬¬ä¸€æ­¥ï¼šAWS CLI ä¸€å®šè¦ç”¨ text è¾“å‡º
âŒ åå†™æ³•ï¼š
å¤åˆ¶ä»£ç 
Bash
subnet=$(aws ec2 describe-subnets --subnet-ids subnet-xxxx)
âœ… æ­£ç¡®å†™æ³•ï¼š
å¤åˆ¶ä»£ç 
Bash
subnet=$(aws ec2 describe-subnets \
  --subnet-ids subnet-xxxx \
  --query "Subnets[0].SubnetId" \
  --output text)
ç¬¬äºŒæ­¥ï¼šæ¸…æ´—å˜é‡ï¼ˆå…³é”®ï¼‰
æ‹¿åˆ°å€¼åä¸€å®šåšä¸€æ¬¡æ¸…ç†ï¼š
å¤åˆ¶ä»£ç 
Bash
subnet=$(echo "$subnet" | tr -d '\r' | tr -d '\n')
subnet="$(echo "$subnet" | xargs)"   # å»é¦–å°¾ç©ºæ ¼
ç¬¬ä¸‰æ­¥ï¼šå†æ’å…¥æ•°ç»„ï¼ˆå¿…æˆåŠŸï¼‰
å¤åˆ¶ä»£ç 
Bash
subnets=()
subnets+=("$subnet")

echo "Inside array: ${subnets[@]}"
ğŸ” æœ€å°å¯å¤ç° + ä¿®å¤å¯¹ç…§ï¼ˆä½ å¯ä»¥ç›´æ¥æ›¿æ¢æµ‹è¯•ï¼‰
âŒ ä¼šå¤±è´¥çš„ç‰ˆæœ¬ï¼ˆä½ å¤§æ¦‚ç‡ç°åœ¨çš„å†™æ³•ï¼‰
å¤åˆ¶ä»£ç 
Bash
subnets=()

subnet=$(aws ec2 describe-subnets \
  --subnet-ids subnet-xxxx)

subnets+=("$subnet")

echo "array: ${subnets[@]}"
ğŸ‘‰ ç°è±¡ï¼š
echo $subnet æœ‰å€¼
æ•°ç»„å´â€œçœ‹èµ·æ¥ç©ºâ€
âœ… å¿…æˆåŠŸç‰ˆæœ¬ï¼ˆä½ åº”è¯¥ç”¨è¿™ä¸ªï¼‰
å¤åˆ¶ä»£ç 
Bash
subnets=()

subnet=$(aws ec2 describe-subnets \
  --subnet-ids subnet-xxxx \
  --query "Subnets[0].SubnetId" \
  --output text)

# === å…³é”®æ¸…æ´— ===
subnet=$(echo "$subnet" | tr -d '\r' | tr -d '\n')
subnet="$(echo "$subnet" | xargs)"

subnets+=("$subnet")

echo "array: ${subnets[@]}"
ğŸš© å¦‚æœä½ æ˜¯å¾ªç¯è·å–å¤šä¸ª subnetï¼ˆæ›´è´´è¿‘çœŸå®åœºæ™¯ï¼‰
æ¨èå†™æˆ while-read å®‰å…¨æ¨¡å¼ï¼š
å¤åˆ¶ä»£ç 
Bash
subnets=()

while read -r s; do
  s=$(echo "$s" | tr -d '\r' | tr -d '\n')
  s="$(echo "$s" | xargs)"
  subnets+=("$s")
done < <(
  aws ec2 describe-subnets \
    --filters Name=vpc-id,Values=vpc-xxxx \
    --query "Subnets[].SubnetId" \
    --output text
)

echo "${subnets[@]}"
ğŸ”¬ ä¸€ç§’æ’é”™æ³•ï¼ˆä½ ç°åœ¨å°±èƒ½éªŒè¯ï¼‰
åœ¨ä½ åŸä»£ç é‡Œï¼Œåœ¨ subnets+=("$subnet") å‰é¢åŠ è¿™ä¸‰è¡Œï¼š
å¤åˆ¶ä»£ç 
Bash
echo "RAW=[$subnet]"
echo "LEN=${#subnet}"
printf "HEX=%q\n" "$subnet"
ä½ å¾ˆå¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼ï¼š
å¤åˆ¶ä»£ç 

RAW=[subnet-abc123 ]
LEN=18
HEX=$'subnet-abc123\r'
ğŸ‘‰ è¿™å°±ç™¾åˆ†ç™¾ç¡®è®¤æ˜¯ AWS è¿”å›å¸¦ä¸å¯è§å­—ç¬¦ï¼Œå¿…é¡»æ¸…æ´—åå†å…¥æ•°ç»„ã€‚
ğŸ‘‰ å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ â€œåŸåœ°æ”¹â€
æŠŠä½ ç°åœ¨çœŸå®çš„ä¸€æ®µ AWS + æ•°ç»„ä»£ç è´´ä¸Šæ¥ï¼Œä¾‹å¦‚ï¼š
å¤åˆ¶ä»£ç 
Bash
subnets=()

subnet=$(aws ...)
subnets+=("$subnet")
æˆ‘ä¼šå¸®ä½ æ”¹æˆç”Ÿäº§çº§ã€GitLab ä¹Ÿç¨³å¦¥çš„ç‰ˆæœ¬ã€‚