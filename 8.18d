ğŸ‘Œ è¦åˆ¤æ–­ä¸€ä¸ª Subnet é‡Œæ”¾äº†å“ªäº›æœåŠ¡ï¼Œå¯ä»¥ä» å­ç½‘ä¸‹çš„ ENI (network interface) å…¥æ‰‹ï¼Œå› ä¸ºæ‰€æœ‰æŒ‚åœ¨è¿™ä¸ªå­ç½‘é‡Œçš„èµ„æºï¼ˆEC2ã€RDSã€EKS Podã€NLBã€Lambda ENI ç­‰ï¼‰éƒ½ä¼šåˆ›å»º ENIã€‚


---

ğŸ” æ–¹æ³•ä¸€ï¼šæŸ¥ ENI çœ‹å…³è”èµ„æº

SUBNET_ID=subnet-0abc123def456ghij

aws ec2 describe-network-interfaces \
  --filters "Name=subnet-id,Values=$SUBNET_ID" \
  --query "NetworkInterfaces[].{ID:NetworkInterfaceId,Type:InterfaceType,Description:Description,Attachment:Attachment.InstanceId}" \
  --output table

è¾“å‡ºé‡Œä¼šçœ‹åˆ°ï¼š

Attachment.InstanceId â†’ å¦‚æœæ˜¯ EC2 å®ä¾‹

Description â†’ å¯èƒ½æ˜¾ç¤ºï¼š

RDSNetworkInterface for DB mydb (Managed by RDS) â†’ RDS

ELB app/my-alb/... â†’ Load Balancer

ECS Task ... â†’ ECS/Fargate

amazon-eks-pod-eni â†’ EKS Pod

AWS Lambda VPC ENI â†’ Lambda

Primary network interface â†’ æ™®é€š EC2




---

ğŸ” æ–¹æ³•äºŒï¼šæŒ‰æœåŠ¡å•ç‹¬æŸ¥

1. EC2 å®ä¾‹

aws ec2 describe-instances --filters "Name=subnet-id,Values=$SUBNET_ID" \
  --query "Reservations[].Instances[].{ID:InstanceId,Name:Tags[?Key=='Name'].Value|[0]}"

2. RDS æ•°æ®åº“

aws rds describe-db-instances \
  --query "DBInstances[?DBSubnetGroup.Subnets[?SubnetIdentifier=='$SUBNET_ID']].DBInstanceIdentifier"

3. ELB / ALB / NLB

aws elbv2 describe-load-balancers \
  --query "LoadBalancers[?AvailabilityZones[?SubnetId=='$SUBNET_ID']].LoadBalancerName"

4. EKS Pod (å¸¦ VPC CNI çš„ ENI)

ENI æè¿°é‡Œä¼šæœ‰ amazon-eks-pod-eniï¼Œå¯ä»¥ç›´æ¥ä»æ–¹æ³•ä¸€è¾“å‡ºé‡Œåˆ¤æ–­ã€‚

5. Lambda (VPC ENI)

ENI æè¿°é‡Œä¸€èˆ¬æ˜¯ AWS Lambda VPC ENIã€‚


---

ğŸ” æ–¹æ³•ä¸‰ï¼šConsole å¯è§†åŒ–

VPC â†’ Subnets â†’ é€‰ä¸­æŸä¸ª Subnet â†’ â€œNetwork interfacesâ€

é‡Œé¢ç›´æ¥åˆ—å‡ºæ‰€æœ‰ ENIï¼Œç‚¹è¿›å»å°±èƒ½çœ‹å‡ºæ˜¯ä»€ä¹ˆæœåŠ¡æŒ‚ä¸Šæ¥çš„ã€‚



---

âœ… æ€»ç»“ï¼š

æœ€å¿«çš„æ–¹æ³•ï¼šç›´æ¥æŸ¥ Subnet ä¸‹çš„ ENI æè¿° (describe-network-interfaces)

æ›´ç²¾ç»†ï¼šæŒ‰ EC2 / RDS / ELB / Lambda / EKS å„è‡ªçš„ API è¿‡æ»¤

å¦‚æœè¿™ä¸ª Subnet é‡Œä¸æ­¢ RDSï¼ŒFIS å®éªŒæ–­æ‰ä¼šå½±å“æ‰€æœ‰è¿™äº›æœåŠ¡



---

è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª ä¸€é”®è„šæœ¬ï¼ˆè¾“å…¥ Subnet IDï¼Œè‡ªåŠ¨åˆ—å‡ºæ‰€æœ‰ EC2ã€RDSã€ELBã€EKSã€Lambda èµ„æºï¼‰ï¼Œè¿™æ ·ä½ å°±èƒ½ç›´æ¥çœ‹åˆ°å‰¯ä½œç”¨æ¸…å•ï¼Ÿ

