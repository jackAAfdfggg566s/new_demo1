å¯¹ï¼Œä½ è¯´å¾—å®Œå…¨æ­£ç¡® ğŸ‘ï¼ŒPostgreSQL å’Œ MySQL çš„ç³»ç»Ÿè¡¨ç»“æ„ç¡®å®ä¸åŒï¼Œä½†æˆ‘ä¸Šé¢é‚£æ¡è¯­å¥æ˜¯ PostgreSQL å®˜æ–¹æ¨èçš„æ–¹å¼ â€”â€” information_schema.columns åœ¨ Postgres é‡Œæ˜¯å®Œå…¨æ”¯æŒçš„ã€‚

ä¸è¿‡å¦‚æœä½ æƒ³ç”¨ PostgreSQL åŸç”Ÿ catalog è¡¨ï¼ˆpg_catalogï¼‰ çš„å†™æ³•ï¼Œæˆ‘å¯ä»¥ç»™ä½ æ›´â€œçº¯æ­£çš„ PG é£æ ¼â€ğŸ‘‡ï¼š


---

ğŸ§© PostgreSQL åŸç”Ÿå‘½ä»¤ï¼šåˆ—å‡ºè¡¨ä¸­æ‰€æœ‰ date ç±»å‹çš„åˆ—

SELECT 
    a.attname AS column_name,
    pg_catalog.format_type(a.atttypid, a.atttypmod) AS data_type
FROM pg_attribute a
JOIN pg_class c ON a.attrelid = c.oid
JOIN pg_namespace n ON n.oid = c.relnamespace
WHERE 
    c.relname = 'ä½ çš„è¡¨å'
    AND n.nspname = 'public'        -- æ›¿æ¢æˆä½ çš„ schema
    AND a.attnum > 0
    AND NOT a.attisdropped
    AND pg_catalog.format_type(a.atttypid, a.atttypmod) = 'date';


---

âœ… ç¤ºä¾‹ï¼š

å‡è®¾è¡¨åä¸º ordersï¼š

SELECT 
    a.attname AS column_name,
    pg_catalog.format_type(a.atttypid, a.atttypmod) AS data_type
FROM pg_attribute a
JOIN pg_class c ON a.attrelid = c.oid
JOIN pg_namespace n ON n.oid = c.relnamespace
WHERE 
    c.relname = 'orders'
    AND n.nspname = 'public'
    AND a.attnum > 0
    AND NOT a.attisdropped
    AND pg_catalog.format_type(a.atttypid, a.atttypmod) = 'date';

è¾“å‡ºç¤ºä¾‹ï¼š

column_name | data_type 
--------------+-----------
 order_date   | date
 ship_date    | date


---

ğŸ’¡ æ‹“å±•ï¼šæƒ³åˆ—å‡ºæ‰€æœ‰â€œæ—¥æœŸæˆ–æ—¶é—´â€ç±»å‹çš„åˆ—

å¯ä»¥æŠŠæœ€åä¸€è¡Œæ¢æˆï¼š

AND pg_catalog.format_type(a.atttypid, a.atttypmod) IN (
    'date',
    'timestamp without time zone',
    'timestamp with time zone',
    'time without time zone',
    'time with time zone'
);


---

æ˜¯å¦å¸Œæœ›æˆ‘å¸®ä½ å†™æˆä¸€ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ä¼ å…¥è¡¨åè‡ªåŠ¨è¿”å›æ‰€æœ‰æ—¶é—´åˆ—ï¼‰ï¼Ÿè¿™æ ·ä»¥åæŸ¥è¯¢ä»»ä½•è¡¨éƒ½å¯ä»¥ä¸€è¡Œæå®šã€‚

