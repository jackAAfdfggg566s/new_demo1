ğŸ‘Œ æ˜ç™½äº†ï¼Œä½ é‡ç‚¹æ˜¯ Database Insightsï¼Œè€Œä¸æ˜¯ Performance Insightsã€‚

âš ï¸ è¦æ³¨æ„ï¼š

Database Insightsï¼ˆCloudWatch â†’ Database Insightsï¼‰æœ¬è´¨ä¸Šæ˜¯ CloudWatch Metrics + Logs çš„å¯è§†åŒ–èšåˆã€‚

å®ƒå¹¶ æ²¡æœ‰å•ç‹¬çš„ APIï¼ˆä¸åƒ pi:GetResourceMetrics é‚£æ ·ï¼‰ã€‚

æ‰€ä»¥ä½ å¦‚æœä¸å¯ç”¨ Performance Insightsï¼Œæ˜¯ ä¸èƒ½ç›´æ¥è°ƒç”¨ Top SQL API çš„ã€‚



---

âœ… é‚£ä¹ˆä½ èƒ½åšçš„æœ‰ä¸¤æ¡è·¯ï¼š

æ–¹æ³• 1ï¼šç›´æ¥ç”¨ CloudWatch Metrics

Database Insights é‡Œçš„ä¸€äº›æ ¸å¿ƒæŒ‡æ ‡ï¼ˆCPUUtilizationã€FreeableMemoryã€DatabaseConnectionsã€ReadIOPSã€WriteIOPSã€CommitLatency ç­‰ï¼‰å·²ç»åœ¨ CloudWatch é‡Œæœ‰å¯¹åº”æŒ‡æ ‡ã€‚

ä½ å¯ä»¥åœ¨ CloudWatch â†’ Metrics â†’ RDS é‡Œæ‰¾åˆ°å¹¶ç›´æ¥åŠ åˆ° Dashboardã€‚

è¿™äº›ä¸éœ€è¦ Performance Insightsï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šæœ‰ã€‚


ğŸ‘‰ ä½†æ˜¯ï¼ŒTop SQL è¿™ç§æŒ‡æ ‡ï¼ˆSQLId, Calls, Latencyï¼‰æ˜¯ åªæœ‰ Performance Insights æ‰èƒ½æ‹¿åˆ°çš„ã€‚


---

æ–¹æ³• 2ï¼šCloudWatch Logs + è‡ªå®šä¹‰å¤„ç†

Database Insights é¡µé¢è¿˜ä¼šç”¨åˆ° Enhanced Monitoring / Performance Schema / DMVï¼ˆå–å†³äº MySQL / Postgres / SQL Serverï¼‰ã€‚

å¦‚æœä½ ä¸å¼€å¯ Performance Insightsï¼ŒTop SQL ä¸ä¼šæœ‰ APIï¼Œä½†ä½ å¯ä»¥ï¼š

1. æ‰“å¼€ Enhanced Monitoring æˆ– Database Engine Logs (general log, slow query log)


2. æŠŠæ—¥å¿—æµé€åˆ° CloudWatch Logs


3. ç”¨ Logs Insights æˆ– Lambda åˆ†æ SQL è¯­å¥è€—æ—¶ã€æ‰§è¡Œæ¬¡æ•°


4. å†å†™åˆ° CloudWatch è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆæ¨¡æ‹Ÿ â€œTop SQLâ€ï¼‰




ğŸ‘‰ è¿™ç§æ–¹æ³•çš„æ•ˆæœç±»ä¼¼ Database Insights çš„ â€œTop SQLâ€ï¼Œä½†è¦ä½ è‡ªå·±å¤„ç†æ—¥å¿—ã€‚


---

ğŸš¦ç»“è®º

å¦‚æœä½ åšæŒä¸å¼€ Performance Insightsï¼š

èƒ½æ‹¿åˆ°çš„ â†’ æ™®é€šæ•°æ®åº“æŒ‡æ ‡ï¼ˆCPUã€è¿æ¥æ•°ã€IOPSã€Latency ç­‰ï¼‰

æ‹¿ä¸åˆ°çš„ â†’ Top SQLï¼ˆè¿™ä¸ªå¿…é¡»è¦ Performance Insightsï¼‰


Database Insights æ§åˆ¶å°é‡Œå±•ç¤ºçš„ Top SQL åŒºå—ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨ PI API çš„ç»“æœã€‚



---

è¦ä¸è¦æˆ‘å¸®ä½ åˆ—ä¸€ä¸ª æ¸…å•ï¼Œå‘Šè¯‰ä½ å“ªäº› Database Insights æŒ‡æ ‡èƒ½ç›´æ¥ä» CloudWatch æ‹¿ï¼ˆä¸ç”¨å¼€ PIï¼‰ï¼Œå“ªäº›ä¸€å®šè¦å¼€ PI æ‰è¡Œï¼Ÿ

