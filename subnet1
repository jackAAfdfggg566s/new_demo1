æ˜ç™½ï¼Œä½ æƒ³ææ¸…æ¥š æŸä¸ª subnet æ˜¯å¦å’Œ RDS ç›¸å…³ï¼Œå› ä¸ºä½ æƒ³æ–­å¼€å®ƒï¼Œä½†ä¸ç¡®å®šä¼šä¸ä¼šå½±å“ RDSã€‚è¿™é‡Œæˆ‘ç»™ä½ ä¸€å¥—ç³»ç»Ÿæ–¹æ³•ï¼Œå¸®ä½ â€œæŸ¥æ¸…æ¥šç”¨é€”â€ï¼Œå°¤å…¶æ˜¯åœ¨ AWS ä¸Š Multi-AZ RDS æˆ–å…¶ä»–èµ„æºç¯å¢ƒä¸‹ã€‚
1ï¸âƒ£ æŸ¥çœ‹ RDS æ‰€åœ¨çš„ subnet
RDS å¹¶ä¸æ˜¯ç›´æ¥æŒ‚åœ¨ subnet ä¸Šï¼Œè€Œæ˜¯æŒ‚åœ¨ DB Subnet Group ä¸­ã€‚æ­¥éª¤ï¼š
ç™»å½• AWS æ§åˆ¶å° â†’ RDS â†’ Databases â†’ é€‰ä¸­ä½ çš„å®ä¾‹ â†’ Connectivity & Security
æ‰¾åˆ° VPC & Subnet Groupï¼Œé‡Œé¢ä¼šåˆ—å‡º RDS å¯ä»¥ä½¿ç”¨çš„ subnet åˆ—è¡¨
æ³¨æ„ï¼šMulti-AZ RDS ä¼šåœ¨è¿™ä¸ª subnet group çš„ä¸åŒ AZ ä¸Šå„æœ‰ä¸€ä¸ªå®ä¾‹
CLI æ–¹å¼ï¼š
å¤åˆ¶ä»£ç 
Bash
aws rds describe-db-instances --db-instance-identifier <your-db>
çœ‹è¾“å‡ºä¸­ï¼š
å¤åˆ¶ä»£ç 
Json
"DBSubnetGroup": {
    "Subnets": [
        { "SubnetIdentifier": "subnet-aaa", "SubnetAvailabilityZone": { "Name": "us-east-1a" } },
        { "SubnetIdentifier": "subnet-bbb", "SubnetAvailabilityZone": { "Name": "us-east-1b" } }
    ]
}
âœ… è¿™é‡Œåˆ—å‡ºçš„ subnet éƒ½ç›´æ¥å…³ç³»åˆ° RDSã€‚
2ï¸âƒ£ æŸ¥çœ‹å…¶ä»– AWS èµ„æºä½¿ç”¨äº†å“ªäº› subnet
æœ‰äº› subnet æ²¡ç›´æ¥åœ¨ RDS ä¸Šæ˜¾ç¤ºï¼Œä½†å¯èƒ½å’Œ RDS é€šä¿¡ï¼ˆæ¯”å¦‚ EC2, NAT Gateway, Route Tableï¼‰ï¼š
EC2 å®ä¾‹ï¼š
å¤åˆ¶ä»£ç 
Bash
aws ec2 describe-instances --filters "Name=subnet-id,Values=subnet-xxx"
Load Balancer / ALB / NLBï¼š
å¤åˆ¶ä»£ç 
Bash
aws elbv2 describe-load-balancers
æŸ¥çœ‹ AvailabilityZones â†’ SubnetId
NAT / Internet Gateway / Route Tablesï¼š
å¤åˆ¶ä»£ç 
Bash
aws ec2 describe-route-tables --filters "Name=association.subnet-id,Values=subnet-xxx"
ECS / EKS / Lambda VPC é…ç½®ï¼šè¿™äº›å¯èƒ½ä¹Ÿä¼šä½¿ç”¨ subnet
3ï¸âƒ£ ç¡®è®¤ subnet æ˜¯å¦èƒ½å®‰å…¨æ–­å¼€
å¦‚æœ subnet åœ¨ RDS DB Subnet Group é‡Œ â†’ ä¸è¦æ–­å¼€ï¼Œæˆ–è€…åªé’ˆå¯¹æ²¡æœ‰å®ä¾‹çš„ AZ åšå®éªŒ
å¦‚æœ subnet ä¸åœ¨ DB Subnet Groupï¼Œä½†æœ‰ EC2 æˆ– ALB ä¸ RDS é€šä¿¡ â†’ æ–­å¼€å¯èƒ½å½±å“åº”ç”¨è®¿é—®ï¼Œä½†ä¸ä¸€å®šè§¦å‘ failover
å¦‚æœ subnet å®Œå…¨æ²¡å…³è”ä»»ä½• RDS/EC2/ALB â†’ ç†è®ºä¸Šå®‰å…¨æ–­å¼€
ğŸ”¹ å°æŠ€å·§ï¼š
ä½ å¯ä»¥å…ˆ æ ‡è®° subnetï¼Œç„¶åç”¨ VPC Reachability Analyzer æµ‹è¯• RDS æ˜¯å¦è¿˜èƒ½è¢«è®¿é—®ï¼Œè¿™æ ·æ›´å®‰å…¨ã€‚
å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä¸ª CLI è„šæœ¬ï¼Œä¸€æ¬¡æ€§åˆ—å‡ºæŸä¸ª VPC ä¸‹æ‰€æœ‰ subnet å’Œå®ƒä»¬å…³è”çš„ RDS / EC2 / LB / Route Tableï¼Œè¿™æ ·ä½ å°±èƒ½ç¡®å®šå“ªäº› subnet å®‰å…¨æ–­å¼€ï¼Œå“ªäº›å¿…é¡»ä¿ç•™ã€‚
ä½ å¸Œæœ›æˆ‘å¸®ä½ å†™å—ï¼Ÿ